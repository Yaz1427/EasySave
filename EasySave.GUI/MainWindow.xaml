<Window x:Class="EasySave.GUI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:res="clr-namespace:EasySave.GUI.Resources"
		xmlns:sys="clr-namespace:System;assembly=mscorlib"
		xmlns:model="clr-namespace:EasySave.Models;assembly=EasySave"
		xmlns:local="clr-namespace:EasySave.GUI"
		xmlns:dat="clr-namespace:System.Windows.Data;assembly=PresentationFramework"

        Title="EasySave"
        Height="600"
        Width="1000"
        WindowStartupLocation="CenterScreen"
        Background="#F4F6F9">

	<Window.Resources>

		<!-- Style bouton principal -->
		<Style x:Key="PrimaryButton" TargetType="Button">
			<Setter Property="Background" Value="#2563EB"/>
			<Setter Property="Foreground" Value="White"/>
			<Setter Property="Padding" Value="16,8"/>
			<Setter Property="FontWeight" Value="SemiBold"/>
			<Setter Property="BorderThickness" Value="0"/>
			<Setter Property="Margin" Value="5"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="Button">
						<Border Background="{TemplateBinding Background}"
                                CornerRadius="8">
							<ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
						</Border>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>

		<!-- Style bouton secondaire -->
		<Style x:Key="SecondaryButton" TargetType="Button">
			<Setter Property="Background" Value="#E5E7EB"/>
			<Setter Property="Foreground" Value="#374151"/>
			<Setter Property="Padding" Value="16,8"/>
			<Setter Property="BorderThickness" Value="0"/>
			<Setter Property="Margin" Value="5"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="Button">
						<Border Background="{TemplateBinding Background}"
                                CornerRadius="8">
							<ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
						</Border>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>

		<Style x:Key="ModernDataGrid" TargetType="DataGrid">
			<Setter Property="Background" Value="Transparent"/>
			<Setter Property="BorderThickness" Value="0"/>
			<Setter Property="GridLinesVisibility" Value="None"/>
			<Setter Property="RowBackground" Value="White"/>
			<Setter Property="AlternatingRowBackground" Value="#FBFBFC"/>
			<Setter Property="HorizontalGridLinesBrush" Value="#E5E7EB"/>
			<Setter Property="VerticalGridLinesBrush" Value="Transparent"/>
			<Setter Property="HeadersVisibility" Value="Column"/>
			<Setter Property="ColumnHeaderHeight" Value="44"/>
			<Setter Property="RowHeight" Value="44"/>
			<Setter Property="SelectionUnit" Value="FullRow"/>
			<Setter Property="SelectionMode" Value="Single"/>
			<Setter Property="CanUserAddRows" Value="False"/>
			<Setter Property="CanUserResizeRows" Value="False"/>
			<Setter Property="CanUserReorderColumns" Value="False"/>
		</Style>

		<Style TargetType="DataGridColumnHeader">
			<Setter Property="Background" Value="#F3F4F6"/>
			<Setter Property="Foreground" Value="#111827"/>
			<Setter Property="FontWeight" Value="SemiBold"/>
			<Setter Property="BorderThickness" Value="0,0,0,1"/>
			<Setter Property="BorderBrush" Value="#E5E7EB"/>
			<Setter Property="Padding" Value="12,0"/>
		</Style>

		<Style TargetType="DataGridCell">
			<Setter Property="BorderThickness" Value="0,0,0,1"/>
			<Setter Property="BorderBrush" Value="#EEF0F3"/>
			<Setter Property="Padding" Value="12,0"/>
			<Setter Property="VerticalAlignment" Value="Center"/>
		</Style>

		<!-- IMPORTANT : enlève le gros bleu de sélection -->
		<Style TargetType="DataGridRow">
			<Setter Property="BorderThickness" Value="0"/>
			<Setter Property="Background" Value="{Binding RelativeSource={RelativeSource Self}, Path=(DataGridRow.Background)}"/>
			<Style.Triggers>
				<Trigger Property="IsSelected" Value="True">
					<Setter Property="Background" Value="#EAF2FF"/>
				</Trigger>
				<Trigger Property="IsMouseOver" Value="True">
					<Setter Property="Background" Value="#F7FAFF"/>
				</Trigger>
			</Style.Triggers>
		</Style>

		<dat:ObjectDataProvider x:Key="JobTypeValues"
                        MethodName="GetValues"
                        ObjectType="{x:Type sys:Enum}">
			<dat:ObjectDataProvider.MethodParameters>
				<x:Type TypeName="model:JobType"/>
			</dat:ObjectDataProvider.MethodParameters>
		</dat:ObjectDataProvider>



	</Window.Resources>

	<Grid Margin="30">

		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>

		<!-- HEADER -->
		<Grid Grid.Row="0">
			<Grid.ColumnDefinitions>
				<ColumnDefinition/>
				<ColumnDefinition Width="Auto"/>
			</Grid.ColumnDefinitions>

			<TextBlock Text="EasySave"
                       FontSize="36"
                       FontWeight="Bold"
                       Foreground="#FF548BD8" HorizontalAlignment="Left" FontFamily="Britannic Bold"/>

			<StackPanel Orientation="Horizontal"
                        Grid.Column="1"
                        VerticalAlignment="Center">
				<TextBlock
                           VerticalAlignment="Center"
                           Margin="0,0,5,0" Width="59" FontFamily="Dubai Medium"><Run Text="Lang"/><Run Text="uage"/><Run Language="fr-fr" Text=" "/><Run Text=":"/></TextBlock>
				<ComboBox Width="120"
                          ItemsSource="{Binding Languages}"
                          SelectedItem="{Binding SelectedLanguage}"
                          DisplayMemberPath="DisplayName"/>
			</StackPanel>
		</Grid>

		<!-- TABLE CARD -->
		<Border Grid.Row="1"
                Background="White"
                CornerRadius="12"
                Padding="20"
                Margin="0,20,0,20">

			<DataGrid ItemsSource="{Binding Jobs}"
                      SelectedItem="{Binding SelectedJob}"
                      AutoGenerateColumns="False"
                      HeadersVisibility="Column"
                      RowHeight="40"
                      GridLinesVisibility="None" SelectionChanged="DataGrid_SelectionChanged">

				<DataGrid.Columns>
					<DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="*"/>
					<DataGridTextColumn Header="SourceDir" Binding="{Binding SourceDir}" Width="*"/>
					<DataGridTextColumn Header="TargetDir" Binding="{Binding TargetDir}" Width="*"/>
					<DataGridComboBoxColumn Header="Type" Width="140"
						ItemsSource="{Binding Source={StaticResource JobTypeValues}}"
						SelectedItemBinding="{Binding Type, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
				</DataGrid.Columns>

			</DataGrid>
		</Border>

		<!-- BUTTONS -->
		<StackPanel Grid.Row="2"
                    Orientation="Horizontal"
                    HorizontalAlignment="Left">

			<Button Content="{x:Static res:Strings.AddJob}"
                    Style="{StaticResource PrimaryButton}"
                    Command="{Binding AddJobCommand}" Width="61" FontFamily="Dubai Medium" Background="#FF6091FC"/>

			<Button Content="{x:Static res:Strings.DeleteJob}"
                    Style="{StaticResource SecondaryButton}"
                    Command="{Binding DeleteJobCommand}" Width="70" FontFamily="Dubai Medium" Background="#FF6091FC" Foreground="White"/>

			<Button Content="{x:Static res:Strings.RunSelected}"
                    Style="{StaticResource SecondaryButton}"
                    Command="{Binding RunSelectedCommand}" Width="98" Click="Button_Click" FontFamily="Dubai Medium" Foreground="White" Background="#FF6091FC"/>

			<Button Content="Lancer tout"
                    Style="{StaticResource PrimaryButton}"
                    Command="{Binding RunAllCommand}" Width="83" FontFamily="Dubai Medium" Background="#FF6091FC"/>
		</StackPanel>

		<!-- STATUS BAR -->
		<Border Grid.Row="3"
                Background="White"
                CornerRadius="10"
                Padding="12"
                Margin="0,20,0,0">
			<TextBlock Text="{Binding StatusText}"
                       Foreground="#374151"/>
		</Border>

	</Grid>
</Window>
